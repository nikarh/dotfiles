roborock_clean_segment:
  alias: Roborock clean segment
  sequence:
  - service: mqtt.publish
    data_template:
      topic: valetudo/roborock/MapSegmentationCapability/clean/set
      payload: '{"segment_ids":["{{ segment }}"]}'
  mode: single
  icon: mdi:robot-vacuum
close_blinds:
  alias: Close blinds
  sequence:
  - if:
    - type: is_not_open
      condition: device
      device_id: 4f83ba057cfdf73d5be6717db15b2f29
      entity_id: binary_sensor.bedroom_window_sensor_contact
      domain: binary_sensor
    then:
    - device_id: 9fde1b08109e86b23ade505b9701a376
      domain: cover
      entity_id: cover.bedroom_blind
      type: set_position
      position: 0
  - if:
    - type: is_not_open
      condition: device
      device_id: 7e479da0f7c7917822f6c9d67f70c5b5
      entity_id: binary_sensor.living_room_window_sensor_contact
      domain: binary_sensor
    then:
    - device_id: 261362453f14d5f3a22789bd507c039f
      domain: cover
      entity_id: cover.living_room_blind
      type: set_position
      position: 0
  mode: single
  icon: mdi:blinds
sleep:
  alias: Prepare HVAC for sleep
  sequence:
  - device_id: 9d4c06a09cdbd8e5ece7db3ace86ef0b
    domain: climate
    entity_id: climate.office_ac
    type: set_hvac_mode
    hvac_mode: 'off'
  - if:
    - condition: numeric_state
      entity_id: sensor.s1_cloud_548774_temperature
      attribute: environmen_temperature
      above: '21'
    then:
    - device_id: 704034f8457078ef825dfdc17087585b
      domain: climate
      entity_id: climate.bedroom_ac
      type: set_hvac_mode
      hvac_mode: cool
    - service: climate.set_temperature
      data:
        temperature: 22.5
      target:
        area_id: bedroom
  mode: single
  icon: mdi:sleep
